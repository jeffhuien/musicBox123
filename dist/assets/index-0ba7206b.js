import{A as M,_ as V,a as q,S as A,f as w}from"./index-5dd2bf53.js";import{d as B,r as _,o,c as n,a as e,b as k,w as $,v as j,u as l,i as D,F as f,e as x,f as F,q as u,g as R,t as g,h as T,p as r,j as E,M as I}from"./index-08c219b8.js";import"./_plugin-vue_export-helper-c27b6911.js";class P extends M{constructor(a){super(a)}async getList(a){return await this.request({url:"/user/playlist",params:{uid:a}})}async getListSongs(a){return await this.request({url:"/playlist/track/all",params:{id:a}})}}const L=new P({baseURL:"/api",method:"get"}),z={class:"w-full h-full flex flex-col pt-3"},G={class:""},H={class:"flex-1 table-container overflow-y-hidden px-5"},J={class:"w-full h-full text-sm flex flex-col text-left text-gray-500 dark:text-gray-400"},K={class:"flex bg-red-200 justify-center p-3"},O={key:0,class:"py-2 mb-5"},Q=e("h2",{class:""},"搜索历史",-1),W={class:"flex gap-2 flex-wrap"},X=["onClick"],Y=["onClick"],Z={class:"text-xs flex gap-3"},ss=["index","onClick"],es={class:"text-xs border mb-3 border-sky-500 bg-white px-3 py-1 rounded-md"},ts={class:"overflow-y-scroll flex-1 border border-pink-300"},as=["index","onClick"],os={class:""},rs=B({__name:"index",setup(C){let a=_(),m=_(),y=_();async function h(t){m.value=await L.getList(t),t!=="null"&&u().add(t)}async function S(t){y.value=await L.getListSongs(t)}async function U(t){let i=await A.getSongUrl(t.id);r().playUrl=i.data[0].url,r().songImg=t.al.picUrl,r().musicName=t.name,r().singerName=t.ar.map(p=>p.name).join("、"),r().isPlay=!0;let d=t.fee.toString();w[d]&&E.info(w[d],{duration:3e3}),await I.play(r().playUrl)}return(t,i)=>{var v,b;const d=V,p=q;return o(),n("div",z,[e("div",G,[k(d,{class:"border-none"})]),e("div",H,[e("table",J,[e("div",K,[$(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=s=>D(a)?a.value=s:a=s),class:"px-4 py-1 rounded-2xl border-b"},null,512),[[j,l(a)]]),e("button",{class:"ml-2 px-4 py-1 rounded-2xl",onClick:i[1]||(i[1]=s=>h(l(a)))},"搜索")]),l(u)().userList.length!=0?(o(),n("div",O,[Q,e("div",W,[(o(!0),n(f,null,x(l(u)().userList,s=>(o(),n("span",{onClick:c=>h(s),class:"text-xs border border-sky-500 bg-white px-3 py-1 rounded-2xl"},[R(g(s)+" ",1),e("i",{onClick:T(c=>l(u)().remove(s),["stop"]),class:"fa-solid fa-xmark opacity-60"},null,8,Y)],8,X))),256))])])):F("",!0),e("div",Z,[(o(!0),n(f,null,x((v=l(m))==null?void 0:v.playlist,(s,c)=>(o(),n("div",{class:"flex gap-2",index:c,onClick:N=>S(s.id)},[e("span",es,g(s.name),1)],8,ss))),256))]),e("tbody",ts,[(o(!0),n(f,null,x((b=l(y))==null?void 0:b.songs,(s,c)=>(o(),n("p",{class:"bg-white p-2 hover:bg-gray-100",index:c,onClick:N=>U(s)},g(s.name),9,as))),256))])])]),e("div",os,[k(p,{class:""})])])}}});export{rs as default};
